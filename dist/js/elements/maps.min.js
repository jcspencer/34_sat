/*!
 * 3/4 Informatics SAT (James Spencer) v0.0.1
 * Copyright 2016 James Spencer
 * License: All Rights Reserved
 */
! function() {
    function t(t) {
        var e = t.url,
            n = t.element,
            a = t.zoom || 6,
            o = {
                center: [-37.29, 144.61],
                zoom: a,
                dragging: !1,
                scrollWheelZoom: !1
            },
            r = new L.Map(n, o).addLayer(new L.TileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png")),
            s = d3.select(r.getPanes().overlayPane).append("svg"),
            p = s.append("g").attr("class", "leaflet-zoom-hide"),
            l = d3.tip().attr("class", "d3-tip").offset([-10, 0]).html(function(t) {
                return "<strong>Average: " + t.properties.avg + "</strong></span>"
            });
        s.call(l), d3.json(e, function(t, e) {
            function n() {
                var t = i.bounds(e),
                    n = t[0],
                    a = t[1];
                s.attr("width", a[0] - n[0]).attr("height", a[1] - n[1]).style("left", n[0] + "px").style("top", n[1] + "px"), p.attr("transform", "translate(" + -n[0] + "," + -n[1] + ")"), m.attr("d", i)
            }

            function a(t, e) {
                var n = r.latLngToLayerPoint(new L.LatLng(e, t));
                this.stream.point(n.x, n.y)
            }
            if (t) throw t;
            var o = d3.geo.transform({
                    point: a
                }),
                i = d3.geo.path().projection(o),
                m = p.selectAll("path").data(e.features).enter().append("path").attr("class", "n").attr("class", function(t) {
                    return "region_" + t.properties.id
                }).on("mouseover", l.show).on("mousedown", l.show).on("touchend", l.show);
            r.on("viewreset", n), n()
        })
    }

    function e(e, n, a) {
        var o = "/34_sat/dist/data/maps/" + n + ".json";
        return t({
            url: o,
            element: e,
            zoom: a
        })
    }
    var n = [
        ["bsw_map", "barwon_south_west", 7],
        ["em_map", "eastern_metropolitan", 7],
        ["wm_map", "western_metropolitan", 8],
        ["nm_map", "northern_metropolitan", 7],
        ["sm_map", "southern_metropolitan", 7],
        ["gi_map", "gippsland", 7],
        ["gr_map", "grampians", 7],
        ["hu_map", "hume", 7],
        ["lm_map", "loddon_mallee", 7],
        ["statewide_map", "state", 6]
    ];
    $(document).ready(function() {
        n.forEach(function(t) {
            console.log(t), e(t[0], t[1], t[2])
        })
    })
}();